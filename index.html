<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projeto SmartSlip - Cronograma</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f7f7f7;
    }
    h1, h2 {
      color: #333;
    }
    section {
      margin-bottom: 40px;
    }
    .fase {
      background: #fff;
      border-left: 6px solid #007BFF;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }
    th {
      background-color: #007BFF;
      color: white;
    }
    /* Estilos para a nova se√ß√£o de detalhes do Slack */
    .slack-detail-section {
        background-color: #e0f7fa; /* Light blue background */
        border-left: 6px solid #00BCD4; /* Cyan border */
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .slack-detail-section h3 {
        font-size: 1.5rem; /* text-2xl */
        font-weight: 700; /* font-bold */
        color: #007BFF; /* Blue color for sub-titles */
        margin-bottom: 15px;
    }
    .slack-detail-section h4 {
        font-size: 1.25rem; /* text-xl */
        font-weight: 600; /* font-semibold */
        color: #0056b3; /* Darker blue for sub-sub-titles */
        margin-top: 20px;
        margin-bottom: 10px;
    }
    .slack-detail-section p, .slack-detail-section ul {
        font-size: 0.95rem;
        line-height: 1.6;
        color: #333;
        margin-bottom: 10px;
    }
    .slack-detail-section ul {
        list-style: disc;
        margin-left: 25px;
    }
    .slack-detail-section strong {
        color: #000; /* Ensure bold text is black */
    }
  </style>
</head>
<body>
  <h1 style="background: linear-gradient(to bottom, #B5FF20, #005E27); color: #000000; padding: 20px; border-radius: 10px; text-align: center; font-size: 2.5em; margin-bottom: 30px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">Projeto SmartSlip - Cronograma de Evolu√ß√£o</h1>

  <div style="margin-bottom: 20px; padding: 15px; background-color: #e0f7fa; border-left: 4px solid #007BFF; border-radius: 5px;">
    <h3 style="color: #007BFF; margin-top: 0;">Informa√ß√µes do Projeto:</h3>
    <p style="color: #333;"><strong>Data de In√≠cio:</strong> 18/06/2025</p>
    <p style="color: #333; margin-top: 10px;"><strong>Observa√ß√£o Importante:</strong> Devido √† natureza do envio dos comprovantes pelas lojas (n√£o garantido como padr√£o), os processos futuros de integra√ß√£o com o SAP via BigQuery ou similar para concilia√ß√£o devem ser tratados como alternativos, para auxiliar na valida√ß√£o, e n√£o como o m√©todo de concilia√ß√£o principal.</p>
  </div>

  <div style="margin-bottom: 40px; padding: 15px; background-color: #e0f7fa; border-left: 4px solid #007BFF; border-radius: 5px;">
    <h3 style="color: #007BFF; margin-top: 0;">√Åreas e Respons√°veis Envolvidos:</h3>
    <ul>
      <li style="color: #333;"><strong>Contas a Receber:</strong> Rodrigo Lisboa</li>
      <li style="color: #333;"><strong>√Årea de Dados:</strong> Linneu Holanda</li>
    </ul>
  </div>

  <section class="fase">
    <h2>‚ú® Fase 1 - Consolida√ß√£o da POC</h2>
    <table>
      <tr><th>Etapa</th><th>Descri√ß√£o</th><th>Prazo</th></tr>
      <tr><td>1.1</td><td>Revisar os comprovantes de cancelamento, venda, dep√≥sito e POS para garantir que os modelos de OCR capturam os campos corretamente.</td><td>Semana 1</td></tr>
      <tr><td>1.2</td><td>Implementar valida√ß√µes estruturais nos campos extra√≠dos, como formatos de datas, n√∫mero de loja, e consist√™ncia nos valores.</td><td>Semana 2</td></tr>
      <tr><td>1.3</td><td>Salvar os dados extra√≠dos em uma base no BigQuery, organizando por tipo de comprovante e origem.</td><td>Semana 2</td>
      <tr><td>1.4</td><td>Gerar relat√≥rios com m√©tricas de acur√°cia do OCR por tipo de campo e tipo de comprovante.</td><td>Semana 3</td></tr>
      <tr><td>1.5</td><td>Desenvolver dashboards para monitoramento cont√≠nuo da leitura de comprovantes e qualidade dos dados.</td><td>Semana 3</td></tr>
    </table>
  </section>

  <section class="fase">
    <h2>üîÑ Fase 2 - Coleta Complementar de Informa√ß√µes</h2>
    <table>
      <tr><th>Etapa</th><th>Descri√ß√£o</th><th>Prazo</th></tr>
      <tr><td>2.1</td><td>Listar campos n√£o contidos nos comprovantes como "Data do movimento" ou "Venda finalizada no mesmo dia?", que precisar√£o ser preenchidos manualmente.</td><td>Semana 4</td></tr>
      <tr><td colspan="3">
        <h3 style="font-weight: bold; margin-top: 15px; margin-bottom: 10px; color: #333;">Exemplos de Campos Complementares:</h3>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr>
              <th style="background-color: #007BFF; color: white; padding: 8px; border: 1px solid #ccc;">Tipo de Comprovante</th>
              <th style="background-color: #007BFF; color: white; padding: 8px; border: 1px solid #ccc;">Campo a Ser Complementado</th>
              <th style="background-color: #007BFF; color: white; padding: 8px; border: 1px solid #ccc;">Canal Sugerido</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding: 8px; border: 1px solid #ccc;">Dep√≥sito de numer√°rio</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Data do movimento banc√°rio</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Slack (bot interativo) ou WhatsApp (via Zenvia)</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #ccc;">Comprovante de Venda (POS)</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Venda finalizada no mesmo dia? Data finaliza√ß√£o? Duplicidade?</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Formul√°rio r√°pido ou bot com perguntas condicionais</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #ccc;">Boleta de POS</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Venda finalizada no mesmo dia? Data finaliza√ß√£o? Duplicidade?</td>
              <td style="padding: 8px; border: 1px solid #ccc;">Mesma l√≥gica acima</td>
            </tr>
          </tbody>
        </table>
      </td></tr>
      <tr><td>2.2</td><td>Escolher canais eficientes para que as lojas complementem esses dados: preferencialmente Slack, WhatsApp (Zenvia), ou web form integrado.</td><td>Semana 5</td></tr>
      <tr><td>2.3</td><td>Desenvolver um bot com linguagem natural para interagir com os usu√°rios e coletar os dados ausentes.</td><td>Semana 6</td></tr>
      <tr><td>2.4</td><td>Fazer a integra√ß√£o das respostas capturadas via bot diretamente com o BigQuery ou via API de backend, garantindo que a complementa√ß√£o seja registrada.</td><td>Semana 7</td></tr>
    </table>
  </section>

  <section class="fase">
    <h2>üì± Fase 3 - Op√ß√µes de Interfaces para Lojas</h2>
    <table>
      <tr><th>Etapa</th><th>Descri√ß√£o</th><th>Prazo</th></tr>
      <tr><td>3.1</td><td>Estudar o escopo t√©cnico para cria√ß√£o de um aplicativo mobile que permita a leitura dos comprovantes diretamente pelas lojas.</td><td>Semana 7</td></tr>
      <tr><td>3.5</td><td>Desenvolver o retorno via bot, com mensagens que mostram a leitura realizada e solicitam dados adicionais, se necess√°rio.</td><td>Semana 11</td></tr>
      <tr><td>3.6</td><td>Implementar e testar interface de complementa√ß√£o via Slack (ex: canal dedicado, mensagens automatizadas ou app dentro do Slack).</td><td>Semana 11</td></tr>
    </table>
  </section>

  <!-- Nova Se√ß√£o: Detalhes da Integra√ß√£o Slack e IA -->
  <section id="slack-ia-details" class="slack-detail-section">
    <h2>Detalhes da Integra√ß√£o Slack e IA para o projeto SmartSlip</h2>
    <p>Este documento aprofunda o processo de como o Slack seria utilizado como um canal para a coleta de comprovantes e informa√ß√µes complementares, integrando a intelig√™ncia artificial (IA) para a leitura e o bot para a intera√ß√£o conversacional, e como esses dados seriam enviados para o BigQuery para posterior confronto com o SAP.</p>

    <h3>1. Envio de Comprovantes pelas Lojas via Slack</h3>
    <p>As lojas teriam duas principais formas de enviar os comprovantes via Slack:</p>
    <ul>
      <li>
        <h4>1.1. Canal Espec√≠fico no Slack:</h4>
        <ul>
          <li><strong>Cria√ß√£o de Canais:</strong> Seria criado um canal dedicado por loja (ex: `#comprovantes-loja-centauro-001`) ou um canal centralizado com identifica√ß√£o da loja na mensagem. A primeira op√ß√£o oferece maior organiza√ß√£o e privacidade.</li>
          <li><strong>Envio Direto:</strong> Os gerentes ou respons√°veis pela presta√ß√£o de contas na loja simplesmente arrastariam e soltariam (drag-and-drop) ou fariam upload dos arquivos de imagem (JPEG, PNG) ou PDF dos comprovantes diretamente no canal Slack.</li>
          <li><strong>Contexto Inicial:</strong> O bot seria configurado para monitorar esses canais. Ao detectar um novo arquivo, ele automaticamente iniciaria o processo de leitura e conversa√ß√£o.</li>
        </ul>
      </li>
      <li>
        <h4>1.2. Aplicativo (App) do Bot no Slack:</h4>
        <ul>
          <li><strong>Interface Simplificada:</strong> Dentro do pr√≥prio Slack, o bot poderia ter um "App Home" ou uma interface de mensagem direta (DM) onde o usu√°rio clicaria em um bot√£o "Enviar Comprovante".</li>
          <li><strong>Fluxo Guiado:</strong> Ao clicar, o bot poderia guiar o usu√°rio com prompts mais espec√≠ficos, como "Por favor, anexe a imagem do comprovante aqui" ou "Qual o tipo de comprovante (venda, cancelamento, dep√≥sito)?", antes mesmo do upload. Isso poderia otimizar a qualidade da entrada de dados.</li>
          <li><strong>Comandos de Barra:</strong> Poderiam ser implementados comandos de barra (ex: `/smartslip-enviar`) para iniciar o fluxo de envio de comprovantes de forma mais estruturada.</li>
        </ul>
      </li>
    </ul>

    <h3>2. Atua√ß√£o do Bot para Conversa√ß√£o e Coleta de Informa√ß√µes Complementares</h3>
    <p>A intelig√™ncia do bot reside em sua capacidade de interagir com o usu√°rio para preencher lacunas na leitura da IA.</p>
    <ul>
      <li>
        <h4>2.1. Detec√ß√£o e In√≠cio da Conversa:</h4>
        <ul>
          <li><strong>Gatilho:</strong> Assim que um comprovante √© enviado (seja no canal ou via app), o backend do bot (hospedado em uma Cloud Function, por exemplo) √© acionado via webhook do Slack.</li>
          <li><strong>An√°lise OCR (IA):</strong> O arquivo √© imediatamente enviado para a API de OCR (ex: Google Vision AI, Azure Form Recognizer). A IA tenta extrair o m√°ximo de campos poss√≠veis (valor, data, CNPJ, tipo de documento).</li>
          <li><strong>Identifica√ß√£o de Lacunas:</strong> O backend compara os campos extra√≠dos pela IA com os campos obrigat√≥rios esperados para aquele tipo de comprovante (conforme as regras de neg√≥cio definidas na Fase 2 do cronograma). Se houver campos ausentes, inconsistentes ou com baixa confian√ßa na leitura, o bot inicia a conversa√ß√£o.</li>
        </ul>
      </li>
      <li>
        <h4>2.2. Intera√ß√£o Conversacional com o Usu√°rio:</h4>
        <ul>
          <li><strong>Mensagem Inicial:</strong> O bot enviaria uma mensagem no Slack (no canal ou em DM com o usu√°rio que enviou o comprovante) informando sobre a leitura e solicitando os dados faltantes.</li>
          <li>Exemplo: "Ol√°! Recebi seu comprovante. Parece ser um 'Comprovante de Venda'. No entanto, n√£o consegui identificar a 'Data de Finaliza√ß√£o da Venda'. Voc√™ poderia me informar?"</li>
          <li><strong>Perguntas Estruturadas:</strong> Para campos espec√≠ficos, o bot pode usar recursos interativos do Slack, como:</li>
          <li><strong>Bot√µes:</strong> Para respostas Sim/N√£o ("Esta venda foi finalizada no mesmo dia? [Sim] [N√£o]").</li>
          <li><strong>Menus Dropdown:</strong> Para sele√ß√£o de op√ß√µes pr√©-definidas (ex: "Qual a data da finaliza√ß√£o? [Data Picker]").</li>
          <li><strong>Entrada de Texto Livre:</strong> Para informa√ß√µes mais complexas (ex: "Por favor, descreva brevemente o item comprado").</li>
          <li><strong>Valida√ß√£o em Tempo Real:</strong> O bot tentaria validar as respostas do usu√°rio imediatamente. Se uma data for digitada incorretamente, ele pediria para corrigir.</li>
          <li><strong>Tratamento de Exce√ß√µes:</strong> Se o bot n√£o conseguir entender a resposta ap√≥s algumas tentativas, ele poderia escalar para um humano (ex: "N√£o entendi sua resposta. Por favor, entre em contato com o Financeiro para aux√≠lio.").</li>
        </ul>
      </li>
      <li>
        <h4>2.3. Fluxo de Exemplo (Comprovante de Venda POS):</h4>
        <ol>
          <li><strong>Usu√°rio:</strong> Envia imagem do comprovante de venda POS para o canal `#comprovantes-loja-xxx`.</li>
          <li><strong>Bot (Backend):</strong> Recebe o arquivo, envia para OCR. OCR extrai `Valor: R$ 150,00`, `Data: 01/07/2025`.</li>
          <li><strong>Bot (Backend):</strong> Identifica que "Venda finalizada no mesmo dia?" e "Duplicidade?" s√£o campos complementares necess√°rios.</li>
          <li><strong>Bot (Slack):</strong> Envia mensagem para o usu√°rio: "Comprovante de Venda lido: Valor R$ 150,00, Data 01/07/2025. Esta venda foi finalizada no mesmo dia? [Sim] [N√£o]"</li>
          <li><strong>Usu√°rio:</strong> Clica em "Sim".</li>
          <li><strong>Bot (Slack):</strong> "√ìtimo! H√° alguma duplicidade conhecida para esta transa√ß√£o? [Sim] [N√£o]"</li>
          <li><strong>Usu√°rio:</strong> Clica em "N√£o".</li>
          <li><strong>Bot (Slack):</strong> "Obrigado! Todas as informa√ß√µes foram coletadas e registradas. Voc√™ pode ver o status em [link para dashboard]."</li>
        </ol>
      </li>
    </ul>

    <h3>3. Captura e Integra√ß√£o de Informa√ß√µes para BigQuery e SAP</h3>
    <p>A coleta de dados via Slack √© apenas o primeiro passo; a integra√ß√£o robusta √© fundamental.</p>
    <ul>
      <li>
        <h4>3.1. Captura de Dados via API (Backend do Bot):</h4>
        <ul>
          <li><strong>Eventos do Slack:</strong> As intera√ß√µes do usu√°rio (envio de arquivos, respostas a perguntas, cliques em bot√µes) geram eventos no Slack que s√£o enviados para o endpoint do backend do bot.</li>
          <li><strong>Processamento no Backend:</strong> O backend do bot (Cloud Function/Lambda) √© o ponto central de processamento. Ele recebe:</li>
          <li>O arquivo do comprovante (via URL tempor√°ria do Slack).</li>
          <li>Os resultados da leitura OCR.</li>
          <li>As respostas conversacionais do usu√°rio.</li>
          <li><strong>Estrutura√ß√£o dos Dados:</strong> O backend √© respons√°vel por consolidar todas essas informa√ß√µes em um formato estruturado (JSON, por exemplo), que inclui os dados do comprovante, os campos complementares, e metadados como `user_id`, `timestamp_envio`, `canal_slack`, etc.</li>
        </ul>
      </li>
      <li>
        <h4>3.2. Armazenamento no BigQuery (Base de Dados para Leitura):</h4>
        <ul>
          <li><strong>Ingest√£o Direta:</strong> A forma mais eficiente seria o backend do bot fazer a ingest√£o direta dos dados estruturados para uma tabela espec√≠fica no BigQuery. O BigQuery √© ideal para grandes volumes de dados e an√°lises posteriores.</li>
          <li><strong>Esquema de Tabela:</strong> A tabela no BigQuery seria projetada para armazenar todos os campos extra√≠dos pelo OCR, os campos complementares, e o link para o comprovante original (armazenado em um Cloud Storage, por exemplo).</li>
          <li><strong>Finalidade:</strong> Esta base no BigQuery seria a "fonte da verdade" para os dados dos comprovantes, permitindo que o Financeiro e outras √°reas pudessem consult√°-los e gerar relat√≥rios.</li>
        </ul>
      </li>
      <li>
        <h4>3.3. Confronto com SAP (Posterior √† Coleta):</h4>
        <ul>
          <li><strong>Processo Batch ou Near Real-time:</strong> A integra√ß√£o com o SAP ocorreria em um momento posterior, n√£o necessariamente em tempo real com cada envio de comprovante. Poderia ser um processo di√°rio ou por batelada.</li>
          <li><strong>BigQuery como Fonte:</strong> O BigQuery seria a fonte prim√°ria de dados para o confronto.</li>
          <li><strong>Regras de Concilia√ß√£o:</strong> As regras de neg√≥cio para concilia√ß√£o (Fase 4 do cronograma) seriam aplicadas. Por exemplo:</li>
          <li>Comparar o valor e a data do comprovante lido com as transa√ß√µes registradas no SAP.</li>
          <li>Verificar se um comprovante de cancelamento no BigQuery corresponde a uma transa√ß√£o cancelada no SAP.</li>
          <li><strong>Identifica√ß√£o de Diverg√™ncias:</strong> O sistema identificaria automaticamente as diverg√™ncias entre os dados do comprovante (BigQuery) e os registros do SAP.</li>
          <li><strong>Gera√ß√£o de Alertas/Relat√≥rios:</strong> Essas diverg√™ncias gerariam alertas (enviados para o Financeiro via Slack, e-mail ou dashboard) e relat√≥rios para investiga√ß√£o e ajuste manual no SAP, se necess√°rio.</li>
          <li><strong>API do SAP (Futuro):</strong> Conforme a Fase 4 do cronograma, a viabilidade de usar a API do SAP para atualiza√ß√µes de status ou busca de dados em tempo real seria analisada, o que poderia automatizar ainda mais o processo de concilia√ß√£o.</li>
        </ul>
      </li>
    </ul>
  </section>
  <section class="fase">
    <h2>‚öñÔ∏è Fase 4 - Integra√ß√£o com SAP e BigQuery</h2>
    <table>
      <tr><th>Etapa</th><th>Descri√ß√£o</th><th>Prazo</th></tr>
      <tr><td>4.1</td><td>Construir integra√ß√£o entre o BigQuery e a base do SAP, possibilitando compara√ß√£o automatizada dos dados lidos com os registros financeiros.</td><td>Semana 12</td></tr>
      <tr><td>4.2</td><td>Definir regras de neg√≥cio para concilia√ß√£o: por exemplo, validar se o valor do comprovante de cancelamento bate com a transa√ß√£o cancelada.</td><td>Semana 13</td>
      <tr><td>4.3</td><td>Desenvolver alertas autom√°ticos para diverg√™ncias ou falhas na concilia√ß√£o dos dados extra√≠dos com os dados do SAP.</td><td>Semana 13</td>
      <tr><td>4.4</td><td>Analisar e testar a viabilidade de uso da API do SAP para atualizar status de concilia√ß√£o ou buscar dados em tempo real.</td><td>Semana 14</td>
      <tr><td>4.5</td><td>Documentar todo o fluxo de dados para uso em auditorias e controles internos.</td><td>Semana 14</td>
    </table>
  </section>

  <section class="fase">
    <h2>üìä Fase 5 - Escala e Evolu√ß√£o</h2>
    <table>
      <tr><th>Etapa</th><th>Descri√ß√£o</th><th>Prazo</th></tr>
      <tr><td>5.1</td><td>Implantar pesquisas r√°pidas e entrevistas com lojas para entender dores e melhorias no uso da ferramenta.</td><td>Semana 15</td>
      </tr>
      <tr><td>5.2</td><td>Realizar ajustes cont√≠nuos no OCR com base em erros recorrentes e novos layouts de comprovantes.</td><td>Cont√≠nuo</td>
      </tr>
      <tr><td>5.3</td><td>Escalar o projeto para novas lojas ou frentes de neg√≥cio (ex: marketplaces, franquias).</td><td>Semana 16+</td>
      </tr>
      <tr><td>5.4</td><td>Construir indicadores mensais de ROI: tempo economizado, assertividade da IA, redu√ß√£o de erros humanos.</td><td>Mensal</td>
      </tr>
    </table>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      function getBusinessDays(startDate, endDate) {
        let count = 0;
        let currentDate = new Date(startDate.getTime()); // Clone the start date

        while (currentDate <= endDate) {
          const dayOfWeek = currentDate.getDay(); // 0 = Sunday, 6 = Saturday
          if (dayOfWeek !== 0 && dayOfWeek !== 6) { // If not Sunday or Saturday
            count++;
          }
          currentDate.setDate(currentDate.getDate() + 1); // Move to the next day
        }
        return count;
      }

      const startDate = new Date('2025-06-18T00:00:00'); // Define a data de in√≠cio do projeto
      const today = new Date(); // Obt√©m a data atual

      // Calcula os dias √∫teis
      const businessDays = getBusinessDays(startDate, today);

      // Atualiza o elemento no HTML com o texto correto
      const infoProjetoDiv = document.querySelector('div[style*="margin-bottom: 20px; padding: 15px; background-color: #e0f7fa;"]');
      if (infoProjetoDiv) {
        const pElement = document.createElement('p');
        pElement.style.color = '#333';
        pElement.innerHTML = `<strong>Dias √öteis (Tempo do Projeto):</strong> ${businessDays} dias √∫teis (at√© ${today.toLocaleDateString('pt-BR')})`;
        
        // Encontra a Observa√ß√£o Importante para inserir antes dela
        const obsImportante = infoProjetoDiv.querySelector('p[style*="margin-top: 10px;"]');
        if (obsImportante) {
          infoProjetoDiv.insertBefore(pElement, obsImportante);
        } else {
          infoProjetoDiv.appendChild(pElement);
        }
      }
    });
  </script>
</body>
</html>
